var utils={listToArray:function(a){var d,b=[];try{b=Array.prototype.slice.call(a,0)}catch(c){for(d=0;d<a.length;d++)b[b.length]=a[d]}return b},toJSON:function toJSON(str){return"JSON"in window?JSON.parse(str):eval("("+str+")")}};utils.win=function(a,b){return"undefined"==typeof b?document.documentElement[a]||document.body[a]:(document.documentElement[a]=b,document.body[a]=b,void 0)},utils.getCss=function(a,b){var c=reg=null;return"getComputedStyle"in window?c=window.getComputedStyle(a,null)[b]:"opacity"===b?(c=a.currentStyle["filter"],reg=/^alpha\(opacity=(\d+(?:\.\d+)?)\)$/,c=reg.test(c)?reg.exec(c)[1]/100:1):c=a.currentStyle[b],reg=/^-?\d+(\.\d+)?(px|pt|em|rem)?$/,reg.test(c)?parseFloat(c):c},utils.offset=function(a){for(var b=a.offsetTop,c=a.offsetLeft,d=a.offsetParent;d;)-1===navigator.userAgent.indexOf("MSIE 8.0")&&(b+=d.clientTop,c+=d.clientLeft),b+=d.offsetTop,c+=d.offsetLeft,d=d.offsetParent;return{top:b,left:c}},utils.prev=function(a){if("previousElementSibling"in a)return a.previousElementSibling;for(var b=a.previousSibling;b&&1!==b.nodeType;)b=b.previousSibling;return b},utils.prevAll=function(a){for(var b=[],c=this.prev(a);c;)b.unshift(c),c=this.prev(c);return b},utils.next=function(a){if("nextElementSibling"in a)return a.nextElementSibling;for(var b=a.nextSibling;b&&1!==b.nodeType;)b=b.nextSibling;return b},utils.nextAll=function(a){for(var b=[],c=this.next(a);c;)b[b.length]=c,c=this.next(c);return b},utils.sibling=function(a){var b=this.prev(a),c=this.next(a),d=[];return b?d[d.length]=b:null,c?d[d.length]=c:null,d},utils.siblings=function(a){return this.prevAll(a).concat(this.nextAll(a))},utils.getIndex=function(a){return this.prevAll(a).length},utils.hasClass=function(a,b){var c=new RegExp("(?:^| +)"+b+"(?: +|$)");return c.test(a.className)},utils.addClass=function(a,b){this.hasClass(a,b)||(a.className+=" "+b)},utils.removeClass=function(a,b){if(this.hasClass(a,b)){var c=new RegExp("(?:^| +)"+b+"(?: +|$)","g");a.className=a.className.replace(c," ")}},utils.children=function(a,b){var e,f,g,c=a.childNodes,d=[];for(e=0;e<c.length;e++)if(f=c[e],1===f.nodeType){if("undefined"!=typeof b){g=new RegExp("^"+b+"$","i"),g.test(f.tagName)?d[d.length]=f:null;continue}d[d.length]=f}return d},utils.getElementsByClass=function(a,b){var c,d,e,f,g,h,i,j;if(b=b||document,"getElementsByClassName"in document)return this.listToArray(b.getElementsByClassName(a));for(c=b.getElementsByTagName("*"),d=[],a=a.replace(/(^ +| +$)/g,"").split(/ +/),e=0;e<c.length;e++){for(f=c[e],g=f.className,h=!0,i=0;i<a.length;i++)if(j=new RegExp("(?:^| +)"+a[i]+"(?: +|$)"),!j.test(g)){h=!1;break}h?d[d.length]=f:null}return d};